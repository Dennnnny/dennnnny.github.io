{"componentChunkName":"component---src-pages-markdown-remark-frontmatter-path-tsx","path":"/blog/from-hexo-to-gatsby-2/","result":{"data":{"markdownRemark":{"html":"<h1>關於開發 Gatsby</h1>\n<p>這部分的話 就跟大多數的 react 專案差不多了～</p>\n<p>我這邊開發 基本上都是照著官網建議 或者是看起來比較多人用的 plugin 在做</p>\n<pre class=\"grvsc-container abyss\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">基本上專案架構會是這樣的</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">my-gatsby-site (root folder)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">├─ src</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">│ ├─ images</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">│ │ └─ icon.png</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">│ └─ pages</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">│   ├─ 404.js</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">│   └─ index.js</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">├─ README.md</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">├─ gatsby-config.js</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">├─ package-lock.json</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">└─ package.json</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">src 資料夾通常會放元件/頁面... 等資料</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">gatsby-config 是調整plugins會用到的設置檔</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">然後還有一些檔案是需要自己看需求調整新增的：</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">gatsby-browser 可以做一個container layout</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">layouts/index.js 我新增一個layouts的資料夾來放一些樣式的檔案</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ex: reset.css &amp; theme</span></span></code></pre>\n<h2>gatsby /pages</h2>\n<p>在 /pages 資料中<br>\n檔案名稱就代表了網址路徑<br>\n例如 index.js 就是 首頁<br>\nabout.js 就是對應到 網址/about 這一頁<br>\n所以可以直接藉由建立新的檔案 來建立新的網址頁面<br>\n非常方便</p>\n<p>gatsby 會在產生頁面的時候<br>\n找到相對應的檔案 建立起來<br>\n如果沒有找到的話 就會引導到 404.js 這個頁面去</p>\n<h3>gatsby 動態路徑</h3>\n<p>首先先上<a href=\"https://www.gatsbyjs.com/docs/how-to/routing/adding-markdown-pages/\">官網</a><br>\n裡面有詳細的說明 讚讚</p>\n<p>這次要做的是把 md 格式的文章轉化成網頁的頁面<br>\n所以會需要一個動態路徑<br>\n比如說 ： md 文章有個 id 叫 abc123<br>\n讓他對應一個 /path/abc123 的網址</p>\n<p>要建立動態的路徑 首先要有一個能夠動態產網址的檔案<br>\n這部分 不論是 gatsby 或 next.js 的做法大同小異<br>\n在建立檔案的時候 用大括號包起來<br>\n=> {MarkdownRemark.frontmatter__path}.js<br>\n這樣就能吃到動態路徑了～\n這個 MarkDownRemark 是一個 plugin 的用法<br>\n為了吃到 md 格式 必須先裝這個套件\n<code>npm i --save gatsby-transformer-remark</code></p>\n<p>可以參考<a href=\"https://www.gatsbyjs.com/plugins/gatsby-transformer-remark/\">這裡</a> 詳細的說明</p>\n<p>然後需要調整一下 gatsby-config 的設置</p>\n<pre class=\"grvsc-container abyss\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15 mtki\">module</span><span class=\"mtk1\">.</span><span class=\"mtk15 mtki\">exports</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  siteMetadata: </span><span class=\"mtk7\">...</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  plugins: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">...</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      resolve: </span><span class=\"mtk11\">`gatsby-source-filesystem`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      options: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        name: </span><span class=\"mtk11\">`md_blog_posts`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        path: </span><span class=\"mtk11\">`${</span><span class=\"mtk1\">__dirname</span><span class=\"mtk11\">}/src/md_blog_posts`</span><span class=\"mtk1\">, </span><span class=\"mtk3\">// 這裡是你存放md的資料夾名稱</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p>然後因為 gatsby 內建用 graphQL<br>\n所以在這頁下面用 graphQL 的方式 來取資料<br>\n不過別擔心<br>\n官網裡面已經有示範大概怎麼寫了<br>\n照著做沒問題的<br>\n你也可以進 localhost:8000/___graphql 裡面去練習打資料</p>\n<p>下面是我的頁面作法：<br>\n我的動態路徑是直接放在/pages 底下的<br>\n所以要在裡面判斷是哪種類型的 md 文章</p>\n<p>當然另外的方法是 在 pages/底下 先新增一個資料夾\n例如： blog/\n底下放 index.js 與 {動態的 md_path}.js<br>\n這樣一來 走到/blog 這頁會先出現 index.js<br>\n然後 /blog/post1 就會是 post.md 這樣了</p>\n<p>以上是今天分享的內容～\n接下來我會分享比較跟 gatsby 沒有直接關聯的主題<br>\n但因為也是這個專案的 所以就一起分享ＸＤ<br>\n一篇會是 styled-components<br>\n一篇是 spread-sheet 的 app-script<br>\n另一篇是比較有關的 留言功能\n希望我可以好好的產出 ＸＤ 👋</p>\n<pre class=\"grvsc-container abyss\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> React </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;react&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> { graphql } </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;gatsby&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> BlogPost </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;@components/page/BlogPost&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> ProjectPost </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk11\">&quot;@components/page/ProjectPost&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">export</span><span class=\"mtk1\"> </span><span class=\"mtk7\">default</span><span class=\"mtk1\"> </span><span class=\"mtk15 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk6\">Template</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk19 mtki\">data</span><span class=\"mtk1\">, </span><span class=\"mtk3\">// this prop will be injected by the GraphQL query below.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> { markdownRemark } </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> data; </span><span class=\"mtk3\">// data.markdownRemark holds your post data</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> { frontmatter, html } </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> markdownRemark;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> { type } </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> frontmatter;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> renderPost </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    blog: &lt;</span><span class=\"mtk15 mtki\">BlogPost</span><span class=\"mtk1\"> </span><span class=\"mtk6\">data</span><span class=\"mtk7\">=</span><span class=\"mtk1\">{{ </span><span class=\"mtk7\">...</span><span class=\"mtk1\">frontmatter, html }} /&gt;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    project: &lt;</span><span class=\"mtk15 mtki\">ProjectPost</span><span class=\"mtk1\"> </span><span class=\"mtk6\">data</span><span class=\"mtk7\">=</span><span class=\"mtk1\">{{ </span><span class=\"mtk7\">...</span><span class=\"mtk1\">frontmatter, html }} /&gt;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> renderPost[type];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15 mtki\">const</span><span class=\"mtk1\"> pageQuery </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">graphql</span><span class=\"mtk11\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  query ($id: String!) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    markdownRemark(id: { eq: $id }) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      frontmatter {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        date(formatString: &quot;MMMM DD, YYYY&quot;)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        path</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        title</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        type</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">        image_cover</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">`</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .abyss { background-color: #000c18; }\n  .abyss .mtki { font-style: italic; }\n  .abyss .mtk15 { color: #9966B8; }\n  .abyss .mtk1 { color: #6688CC; }\n  .abyss .mtk7 { color: #225588; }\n  .abyss .mtk11 { color: #22AA44; }\n  .abyss .mtk3 { color: #384887; }\n  .abyss .mtk6 { color: #DDBB88; }\n  .abyss .mtk19 { color: #2277FF; }\n  .abyss .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"date":"September 13, 2022","path":"/blog/from-hexo-to-gatsby-2","title":"Gatsby用起來_開發中","type":"blog","image_cover":"https://images.unsplash.com/photo-1542903660-eedba2cda473?fit=crop&w=1000&q=80"}}},"pageContext":{"id":"9d53f1fc-e643-5a66-8401-5baed3a41ab8","frontmatter__path":"/blog/from-hexo-to-gatsby-2","__params":{"frontmatter__path":"blog"}}},"staticQueryHashes":["3764592887"]}